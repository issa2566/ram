@echo off
chcp 65001 > nul
color 0A
cls

echo.
echo    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo    โ                                                       โ
echo    โ         ๐ง ุงูุญู ุงูููุงุฆู ุงููุถููู 100%                โ
echo    โ                                                       โ
echo    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

echo    [1/6] ุฅููุงู ุฌููุน ุงูุนูููุงุช...
taskkill /f /im node.exe >nul 2>&1
timeout /t 2 /nobreak > nul
echo          โ ุชู ุฅููุงู ุฌููุน ุงูุนูููุงุช
echo.

echo    [2/6] ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช...
cd /d "%~dp0backend"
if exist "test-db-connection.js" (
    echo          ๐ ุฌุงุฑู ุงูุนุซูุฑ ุนูู ูููุฉ ุงููุฑูุฑ ุงูุตุญูุญุฉ...
    node test-db-connection.js >nul 2>&1
    if exist "db-fixed.js" (
        copy db-fixed.js db.js >nul 2>&1
        echo          โ ุชู ุฅุตูุงุญ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
    ) else (
        echo          โ๏ธ ุชุญุฐูุฑ: ูู ูุชู ุงูุนุซูุฑ ุนูู ูููุฉ ูุฑูุฑ ุตุญูุญุฉ
    )
) else (
    echo          โ๏ธ ุชุญุฐูุฑ: ููู ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏ
)
echo.

echo    [3/6] ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช...
if exist "setup-database.js" (
    echo          ๐ ุฌุงุฑู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช...
    node setup-database.js >nul 2>&1
    echo          โ ุชู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
) else (
    echo          โ๏ธ ุชุญุฐูุฑ: ููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏ
)
echo.

echo    [4/6] ุชุซุจูุช ุงูููุชุจุงุช...
call npm install >nul 2>&1
echo          โ ุชู ุชุซุจูุช ุงูููุชุจุงุช
echo.

echo    [5/6] ุชุดุบูู Backend...
start "๐ Backend Server" cmd /k "echo Backend Server ูุนูู ุนูู http://69.169.108.182:3000 && echo. && echo โ๏ธ ูุง ุชุบูู ูุฐู ุงููุงูุฐุฉ! && echo. && node server.js"
timeout /t 5 /nobreak > nul
echo          โ Backend ูุนูู
echo.

echo    [6/6] ุชุดุบูู Frontend...
cd /d "%~dp0auto-display-replicator-main"
start "๐จ Frontend" cmd /k "echo Frontend ูุนูู ุนูู http://localhost:8080 && echo. && echo โ๏ธ ูุง ุชุบูู ูุฐู ุงููุงูุฐุฉ! && echo. && npm run dev"
timeout /t 3 /nobreak > nul
echo          โ Frontend ูุนูู
echo.

echo    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo    โ                                                       โ
echo    โ              โ ุชู ุญู ุฌููุน ุงููุดุงูู!                  โ
echo    โ                                                       โ
echo    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.
echo    ๐ ุงูุฑูุงุจุท:
echo       โข Frontend: http://localhost:8080
echo       โข Backend:  http://69.169.108.182:3000
echo.
echo    ๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู:
echo       โข Email:    admin@example.com
echo       โข Password: admin123
echo.
echo    ๐ฏ ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู:
echo       1. ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL
echo       2. ุดุบู: ุงุฎุชุจุงุฑ_ูุงุนุฏุฉ_ุงูุจูุงูุงุช.bat
echo       3. ุชุฃูุฏ ูู ูููุฉ ุงููุฑูุฑ ูู backend\db.js
echo.

timeout /t 3 /nobreak > nul
start http://localhost:8080

echo    ๐ ุชู ูุชุญ ุงููุชุตูุญ!
echo.
echo    ููููู ุฅุบูุงู ูุฐู ุงููุงูุฐุฉ ุงูุขู.
echo    ูุง ุชุบูู ุงููุงูุฐุชูู ุงูุฃุฎุฑููู (Backend ู Frontend)
echo.
pause

